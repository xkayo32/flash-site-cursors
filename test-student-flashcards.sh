#!/bin/bash

echo "üéØ TESTE COMPLETO - SISTEMA DE FLASHCARDS PARA ESTUDANTES"
echo "========================================================="
echo ""

# Verificar se o servidor est√° rodando
if ! curl -s http://localhost:5173 > /dev/null; then
    echo "‚ùå ERRO: Frontend n√£o est√° rodando em localhost:5173"
    echo "Execute: cd frontend && npm run dev"
    exit 1
fi

echo "‚úÖ Frontend rodando em http://localhost:5173"
echo ""

echo "üìã ROTEIRO DE TESTES COMPLETO"
echo "============================="
echo ""

echo "1Ô∏è‚É£ TESTE DE ACESSO - ESTUDANTE:"
echo "   a) Fa√ßa login como estudante (aluno@example.com / aluno123)"
echo "   b) Verifique se aparece 'MEU ARSENAL' na sidebar"
echo "   c) Clique em 'MEU ARSENAL' -> deve abrir /my-flashcards"
echo ""

echo "2Ô∏è‚É£ TESTE DE CRIA√á√ÉO DE FLASHCARDS:"
echo "   a) Na p√°gina 'MEU ARSENAL', clique em 'CRIAR FLASHCARD'"
echo "   b) Teste todos os 7 tipos de flashcard:"
echo "      - üîµ B√ÅSICO (Frente/Verso)"
echo "      - üü¢ B√ÅSICO INVERTIDO"
echo "      - üü° LACUNAS (Cloze) - use {{c1::palavra}}"
echo "      - üü£ M√öLTIPLA ESCOLHA"
echo "      - üî¥ VERDADEIRO/FALSO"
echo "      - üü¶ DIGITE RESPOSTA"
echo "      - üü† OCLUS√ÉO DE IMAGEM"
echo "   c) Teste o bot√£o 'CARREGAR EXEMPLO' para cada tipo"
echo "   d) Configure visibilidade: PRIVADO vs P√öBLICO"
echo "   e) Salve o flashcard"
echo ""

echo "3Ô∏è‚É£ TESTE DE GEST√ÉO DE FLASHCARDS:"
echo "   a) Visualize flashcards em modo grid e lista"
echo "   b) Use filtros: busca, dificuldade, status"
echo "   c) Teste a√ß√µes: Preview, Editar, Ocultar/Publicar, Excluir"
echo "   d) Verifique contadores de stats no topo"
echo ""

echo "4Ô∏è‚É£ TESTE DE IMPORT/EXPORT ANKI:"
echo "   a) Clique na aba 'IMPORTAR/EXPORTAR'"
echo "   b) Teste importa√ß√£o com arquivo: /tmp/test_deck.apkg"
echo "   c) Teste exporta√ß√£o nos 4 formatos:"
echo "      - JSON, CSV, ANKI, .APKG"
echo "   d) Verifique que flashcards importados ficam como PRIVADO"
echo ""

echo "5Ô∏è‚É£ TESTE DE ESTUDO:"
echo "   a) Clique em 'ESTUDAR TODOS' na p√°gina"
echo "   b) Teste o modal de estudo interativo"
echo "   c) Verifique navega√ß√£o entre cards"
echo "   d) Teste bot√µes 'Acertei/Errei'"
echo ""

echo "6Ô∏è‚É£ TESTE DE PERMISS√ïES - ADMIN:"
echo "   a) Fa√ßa logout e login como admin"
echo "   b) V√° para: /admin/flashcards/cards"
echo "   c) Verifique filtro 'AUTOR' nos filtros"
echo "   d) Filtre por autor espec√≠fico"
echo "   e) Verifique que admin v√™ author_name nos cards"
echo "   f) Confirme que admin N√ÉO pode editar flashcards de estudantes"
echo ""

echo "7Ô∏è‚É£ TESTE DE VISIBILIDADE:"
echo "   a) Como estudante, crie flashcard PRIVADO"
echo "   b) Como estudante, crie flashcard P√öBLICO"
echo "   c) Como admin, verifique que v√™ ambos com filtros"
echo "   d) Como outro estudante, confirme que s√≥ v√™ os P√öBLICOS"
echo ""

echo "8Ô∏è‚É£ TESTE DE INTEGRA√á√ÉO COMPLETA:"
echo "   a) Importe flashcards do Anki"
echo "   b) Edite alguns importados"
echo "   c) Crie um deck com eles"
echo "   d) Exporte o deck completo"
echo "   e) Teste sess√£o de estudo completa"
echo ""

echo "üîç PONTOS DE VERIFICA√á√ÉO IMPORTANTES:"
echo "===================================="
echo ""
echo "‚úì Estudantes s√≥ veem/editam seus pr√≥prios flashcards"
echo "‚úì Admin pode filtrar e visualizar flashcards de qualquer usu√°rio"
echo "‚úì Flashcards PRIVADOS s√≥ vis√≠veis para o criador"
echo "‚úì Flashcards P√öBLICOS vis√≠veis para todos"
echo "‚úì Import/export funcional nos 4 formatos"
echo "‚úì Sistema de estudo com SRS funcional"
echo "‚úì Todos os 7 tipos de flashcard implementados"
echo "‚úì Interface t√°tica/militar consistente"
echo ""

echo "üéØ URLs IMPORTANTES PARA TESTE:"
echo "==============================="
echo "üìö P√°gina do Estudante: http://localhost:5173/my-flashcards"
echo "‚ûï Criar Flashcard: http://localhost:5173/student/flashcards/new"
echo "üõ°Ô∏è Admin Flashcards: http://localhost:5173/admin/flashcards/cards"
echo "üè† Dashboard Estudante: http://localhost:5173/dashboard"
echo "üîß Admin Dashboard: http://localhost:5173/admin/dashboard"
echo ""

echo "üìÅ ARQUIVOS DE TESTE CRIADOS:"
echo "============================="
echo "‚Ä¢ /tmp/test_deck.apkg - Arquivo teste para importa√ß√£o"
echo "‚Ä¢ /tmp/test_flashcards.json - JSON de exemplo"
echo ""

echo "‚ú® SISTEMA PRONTO PARA TESTES COMPLETOS!"
echo ""
echo "Para iniciar os testes, acesse: http://localhost:5173"